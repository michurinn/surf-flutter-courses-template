// Попробую разложить задачу, как в лекции : https://drive.google.com/drive/folders/1mmgAvAByRSzFuiBHEu4-0BzlBvy5GA8j
Используемый порядок решения задачи:
1. Data Object
2. Repository
3. Global State
4. Dependency Injection
5. Routing
6. UI (Common)
7. UI (Widgets)


## Description

1. Используется Data Object, предоставленный в задании. 
    Также для отображения в чеке создан дополнительный класс ProductInCart, который при создании вычислит итоговую стоимость
    покупки.
    Здесь принимается за истину, что в ProductEntity хранится цена за шт/кг. Поетому на основании цены,количества и скидки в ProductInCart вычисляется 
    итоговая стоимость покупки, которая и будет отображаться в чеке.
    Здесь принимается за истину, что в ProductEntity хранится скидка за шт/кг. Поетому на основании количества и скидки в ProductInCart вычисляется 
    итоговая скидка покупки, которая и будет отображаться в чеке.
2. Repository создан номинальный, все данные в задаче - моковые.
3. В примере Global state, но в задаче необходимо реализовать Local State. 
    По требованиям задачи реализуем 3 стейта:
    а. Состоние отсутствия данных
    б. Состояние загрузки данных
    в. Состояние загруженных данных
    Также по требованиям задачи состояние загруженых данных должно содержать данные, отсортированные по критерию.

    Исходя из описанных требований, был выбран пакет flutter_bloc. Также можно использовать прочие стейт-менеджменты, например, mob_x.
    Генерация классов осуществляется с помощью пакета freezed.
    Созданы 5 стейтов:
    - Загрузки данных
    - Отсутствия данных
    - Загруженных данных
    - Отсотрированных данных 
    - Отсортированных по Категории данных
    Стейт Отсотрированных данных номинальный, не требуется для корректной работы, дублирует стейт Загруженных данных.
    Стейт Отсортированных по Категории данных создан дополнительно, поскольку UI соответсвующий стейту отличается от UI прочих отсортированных
        стейтов - добавлены названия категорий.
    Созданы 2 events:
    - Загрузки _Load, который принимает номер чека;
    - Сортировки _Sort, который принимает функцию-компаратор. Функция будет передаваться из BottomSheet сортировки.
    Также следует отметить, что BLoC возвращает на UI объекты ProductInCart (см. обоснование в п.1)
4. Для связки данных с UI объявлен RepositoryProvider, который предоставляет репозиторий в ReceiptBloc (передаётся в качестве параметра)
// Описать как передаётся номер чека в екран чека
5. Настройка Routing состоит из отображения ModalBottomShet, который возвращает функцию сортировки, основываясь на выборе пользователя.
    В ModalBottomShet возвращает Comparator, соотвествующий выбранной сортировке, для дальнейшей передачи в BLoC.
6.  Для создания скроллящегося списка использован CustomScrollView и Slivers. Виджет для каждой категории представляет SliverList.
    Согласно материалам к уроку, такой способ предпочтительнее при использовании списков внутри списка. На данном задании заметных преимуществ не 
    предоставляем ввиду небольших размеров списков.
## Problems

1. В строке "Скидка" не было добавлен 5%, т.к. требуется уточнение задачи для отображения суммы скидки.
2.  Выбор категории в ModalBottomShet реализован только по нажатию на Radio, нужно добавить возсожность нажатия всю облать ListTile,например, можно бужет нажимать на текст.
3.  В ModalBottomShet по умолчанию выбрана категория Без сортировки, хотя правильнее было бы сделать ранее выбранную, если уже выбирали способ сортировки.
4. lib/ui/dialogs/sorting_receipt_dialog.dart : 218 Мне кажется, данное решение будет приводить к ошибкам, если список не сгруппирован по категории
Но при тестировании ошибок не обнаружено.
5. Согласно макету названия категорий отображаются только при выборе сортировки По типу, но согласно п.1. ТЗ - Элементы должны быть сгруппированы по полю `category`. Поетому добавлены категории для всех случаев. Как Вы считаете?


## More


## Demo

